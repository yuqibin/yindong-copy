(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26bae634"],{2128:function(e,n,t){"use strict";var r=t("fb71"),a=t.n(r);a.a},a960:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"header-wrap"},[t("div",{staticClass:"author"},[t("div",{staticClass:"portrait flex-xc flex-yc"},[t("img",{staticClass:"head-pic",attrs:{src:e.userInfo.icon,alt:""}}),t("div",{staticClass:"change-head",on:{click:e.uploadNewHead}},[t("el-upload",{ref:"headUploader",staticClass:"hided-upload",attrs:{limit:1,"on-success":e.handleAvatarSuccess,"on-error":e.handleError,"before-upload":e.beforeAvatarUpload,action:e.qiniuConf.upload_qiniu_url,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,data:e.qiniuData}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传头像")])],1)],1)]),t("div",{staticClass:"other"},[t("h1",{staticClass:"name"},[e._v(e._s(e.userInfo.name||""))]),t("span",{staticClass:"autograph ell"},[e._v(e._s(e.userInfo.autograph||""))])])]),t("div",{staticClass:"menu-list"},[t("ul",[t("li",{staticClass:"all",class:{curr:!e.currMenu},on:{click:function(n){return e.goIndex()}}},[e._v("全部")]),e._l(e.menuList,(function(n){return t("li",{key:n.name,class:{curr:e.currMenu===n.name},on:{click:function(t){return e.changeMenu(n)}}},[e._v(" "+e._s(n.describe)+" ")])})),e.superAdmin?t("li",{class:{curr:"invcode"===e.currMenu},on:{click:e.goInvCode}},[e._v(" 邀请码 ")]):e._e()],2)])])},a=[],i=(t("99af"),t("c975"),t("b0c0"),t("ac1f"),t("5319"),t("1276"),t("96cf"),t("1da1")),s=t("22ce"),u=t("d7e7"),c=(t("d3b7"),[{path:"/invcode",name:"Invcode",component:function(){return t.e("chunk-d58cbbb4").then(t.bind(null,"cd92"))}}]),o={name:"header-c",data:function(){return{superAdmin:null,userInfo:{},menuList:[],currMenu:"",form:{imgUrl:""},qiniuConf:{upload_qiniu_url:"http://upload-z2.qiniup.com",upload_qiniu_addr:"cdn.yindong.club"},qiniuData:{key:"",token:""}}},wathc:{"$route.path":function(){var e=this.$route.path;this.currMenu=e}},components:{},created:function(){this.init()},methods:{init:function(){var e=this;this.currMenu=this.$route.path.replace("/",""),e.getUserInfo(),e.getMenuList(),e.getQiniuToken(),this.isSuperAdmin()},goIndex:function(){this.$router.push("/index")},goInvCode:function(){this.currMenu="invcode",this.$router.push("/invcode")},isSuperAdmin:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["l"])();case 2:t=n.sent,t=t.data,0===t.code&&(e.superAdmin=!0,e.$router.addRoutes(c));case 5:case"end":return n.stop()}}),n)})))()},uploadNewHead:function(){this.$refs.headUploader.submit()},changeMenu:function(e){this.currMenu=e?e.name:"",u["a"].$emit("changeMenu",e||{name:"",describe:"全部"})},getUserInfo:function(){var e=this;Object(s["j"])().then((function(n){n=n.data||{},0===n.code?e.userInfo=n.data:(e.$message.error("未登录或登录过期~"),e.$router.push("/login"))}))},getMenuList:function(){var e=this;Object(s["h"])().then((function(n){n=n.data||{},0===n.code?(e.menuList=n.data,sessionStorage.setItem("menuList",JSON.stringify(n.data||[])),e.changeMenu()):e.$message.error("未知错误~")}))},getQiniuToken:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["i"])();case 2:t=n.sent,t=t.data,0===t.code&&(e.qiniuData.token=t.data.qiniutoken);case 5:case"end":return n.stop()}}),n)})))()},handleRemove:function(e,n){this.form.imgUrl="",this.fileList=[]},handlePictureCardPreview:function(e){this.form.imgUrl=e.url,this.bigPicFlag=!0},beforeAvatarUpload:function(e){var n=["image/jpeg","image/png"],t=n.indexOf(e.type)>=0,r=e.size/1024/200<1;t||this.$message.error("上传头像图片只能是 JPG PNG 格式!"),r||this.$message.error("上传图片大小不能超过 200KB!");var a=e.name.split(".");return this.qiniuData.key="head_pic/dulele_".concat(Date.now(),".").concat(a[a.length-1]),t&&r},handleAvatarSuccess:function(e,n){this.form.imgUrl="http://".concat(this.qiniuConf.upload_qiniu_addr,"/").concat(e.key),this.saveImgUrlHandle()},saveImgUrlHandle:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["o"])({imgurl:e.form.imgUrl});case 2:t=n.sent,t=t.data,0===t.code&&(e.userInfo.icon=e.form.imgUrl,e.$message.success("更新成功哦~"));case 5:case"end":return n.stop()}}),n)})))()},handleError:function(e){this.$message({message:"上传失败",duration:2e3,type:"warning"})}}},d=o,l=(t("2128"),t("2877")),h=Object(l["a"])(d,r,a,!1,null,"5d19edf0",null);n["default"]=h.exports},d7e7:function(e,n,t){"use strict";var r=t("2b0e");n["a"]=new r["default"]},fb71:function(e,n,t){}}]);